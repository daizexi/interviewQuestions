# 1. Vue模板编译原理的3个步骤

1. 将模板字符串转换成element ASTs
2. 



# 2. 解析器

- 解析器的作用

  - 解析器用于将模板字符串解析成AST。

- AST

  - AST是抽象语法树，实际上就是一颗多叉树。它和Vnode很类似，都是使用对象来描述一个结点。
  - 因此解析器的作用就是读取模板字符串，然后构建一颗多叉树。

- HTML解析器

  - 作用

    - HTML解析器是最主要的解析器，用于解析HTML。

  - 钩子函数

    - HTML解析器在解析模板的过程中会在不同情况下触发不同的钩子函数。
      1. 开始标签钩子函数
      2. 结束标签钩子函数
      3. 文本钩子函数
      4. 注释钩子函数

  - 钩子函数伪代码

    ```{javascript}
    parseHTML(template,{
      start(tag,attrs,unary) {}, //tag是标签名，attrs是标签属性，unary是是否自闭合标签。
      end(){},
      chars(text){}, //text是文本结点的文本
      comment(text){}, //text是注释结点的文本
    })
    ```

  - 一个例子

    ```{html}
    <div>
      <p>hi</p>
    </div>
    ```

    HTML解析器在解析上面的HTML时会依次触发

    1. start，在读取到div开始标签时触发。
    2. start，在读取到p开始标签时触发。
    3. chars，在读取到文本的时候触发。
    4. end，在读取到p结束标签时触发。
    5. end，在读取到div结束标签时触发

  - 栈来储存当前结点的父结点

    - 很明显，如果我们想要构造一个多叉树，对于每一个当前结点，我们都需要知道这个当前结点的父结点。而当前结点的父结点明显具有后进先出特点，因此我们维护一个栈，栈顶元素就是当前结点的父结点。
    - 在start钩子函数中触发入栈操作，在end钩子函数中触发出栈。

- HTML解析器的工作原理

  - 

- 